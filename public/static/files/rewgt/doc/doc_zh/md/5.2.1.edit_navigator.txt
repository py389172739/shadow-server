5.2.1 编辑导航面板
---------------

&nbsp;

本节介绍导航面板的可视化设计，[前一章](#5.1.) 已介绍过的操作方法不再细述，针对导航面板特有的操作才详细讲解。

#### 创建导航面板，关联选项构件与场景面板

步骤：

1. 从 Nav 样板页拖入一个导航面板（NavPanel 或 NavDiv）

2. 从 P 样板页拖入一个段落 P 构件，添加为导航面板的子成员

3. 再从 Nav 样板页往 P 构件中拖入创建多个选项构件（如 OptButton、OptInput 等），命名每个选项构件（即设置 key 值）

4. 从 Nav 样板页往导航面板中拖入一个场景面板（GroundPanel 或 GroundDiv），并立即命名   
要求用上面赋给选项构件各 key 值之一来命名。刚创建的场景面板在设计区无法通过鼠标点击直接选中，只能先选它的父构件（即导航面板），从子构件列表中选择它。选中场景面板后在 property 页修改它的 key 值，之后，凡操作这个场景面板，都要通过点击同 key 值的选项构件，来切换该场景面板，才能修改它的属性，或增、删、改它的子成员。

5. 重复多次上一步操作，创建并命名多个场景面板

注意，在 design 态与非 design 态，都用选项构件切换场景面板，存盘前选择状态（哪个选项构件在用及哪个场景面板在显示）被保存，所以，产品正式发布前最后设计时，您需恢复缺省的导航面板状态，再存盘。

#### 选中构件与选择选项

众多内置构件可用作选项构件，行内构件如 `OptSpan, OptA, OptImg, OptButton, OptInput, OptOption` 等均可，非行内构件如 `OptDiv, OptLi` 也可以。

在设计态下，点击选项构件的含义既可以选中该构件（随后编辑其属性），还可以是选择该选项（设置 `data-checked`，并切换相关场景面板）。Shadow Widget 的设计器这么区分：当选项构件未被选中时，点击它的含义是选中该构件，如果它已选中，点击它则是选择该选项（设置 `data-checked`）。

说明一下，某些选项构件受 DOM 特性限制，点击的含义是上述二者合一，而不分作两步。

#### 快速编辑属性值

在可视化设计界面，Shadow Widget 支持一种快速编辑构件属性值的操作方式，用鼠标双击某个构件，系统随即弹出一个缺省编辑器窗口，如果这类构未经特殊定制，缺省编辑器就是该构件的属性编辑器。

比如我们双击一个 OptImg 构件，弹出属性编辑器如下：

![edit json props](md/res/edit_json_prop.png)

手工输入 src 属性值，即为 OptImg 指定图片。我们还可以在右侧 resource 页下，选择某个图片文件，然后将它的预览图用鼠标拖到上面编辑器中，该图片的 URL 字串会自动拷贝过来。

#### 用选项构件设计弹窗

用于弹窗的选项构件要预定义 `popOption` 属性，它通常也在导航面板下定义，但不必与场景面板（同 key 值）关联使用，下面举例动态弹窗如何设计：

1. 拖入样板创建一块导航面板，命名为 panel_a

2. 在 panel_a 下创建一个段落 P，命名为 p_b，在 p_b 下创建 OptButton 选项构件，命名为 btn_c

3. 在主设计区双击 btn_c 按钮，然后在弹出的编辑框修改该构件的属性，定义 popOption 属性值为 `{path:"./panel_d"}`   
关于 popOption 的参数格式，请参考 [utils.popWin.showWindow](#4.2.2.!show_window) 。

4. 在 panel_a 下创建一个子面板，命名为 panel_d，再在 panel_d 下创建一个段落 P

完成上面设计后，点击 btn_c 按钮，系统将弹出一个弹窗，弹窗内容正是 panel_d 面板。

设计弹窗并不依赖导航面板，但在导航面板下，定义 `popOption.path` 可方便的以相对路径指示弹窗的内容节点。

&nbsp;

2.3.1 可选导航的组成
----------------------

&nbsp;

可选导航是这么一种构件组合，它由一个 “导航面板”（NavPanel 或 NavDiv）、1 个或多个 “选项构件”，及 N 个 “场景面板”（GroundPanel 或 GroundDiv）组成，形成一个功能模组。

#### 一个简单例子

用转义标签定义界面（见 demo16）：

```
<style>
.ctrl-page {
  margin: 0px 2px 0px 0px;
}
.ctrl-page[data-checked="1"] {
  color: #c00;
}
</style>

<div id="react-container" style="visibility:hidden; position:absolute; left:0px; top:0px">
<div :t=BodyPanel key='body'>
  <div :t=Panel key='top'>
    <div :t=NavPanel key='nav' width='{0.9999}' height='{200}'>
      <div :t=P key='p' width='{0.9999}'>
        <span :t=OptButton klass='ctrl-page' name='page' key='a' data-checked='1'>page A</span>
        <span :t=OptButton klass='ctrl-page' name='page' key='b'>page B</span>
        <span :t=OptButton klass='ctrl-page' name='page' key='c'>page C</span>
      </div>
      
      <div :t=GroundDiv key='a'>It is page A</div>
      <div :t=GroundDiv key='b'> It is page B</div>
      <div :t=GroundDiv key='c'> It is page C</div>
    </div>
  </div>
</div>
</div>
```

这个样例展示如下界面：

> ![用按钮切换页面](md/res/button_nav_panel.png)

上例用一个导航面板（NavPanel）包含所有构件，面板下定义 3 个选项构件（上图第一行 3 个按钮，用 OptButton 定义），及 3 个动态选择显示的场景面板（GroundDiv），如上图显示 "It is page A" 的构件是其中一个。当用鼠标点击第一行各个按钮时，相应的场景面板将切换进来显示，即：这里按钮相当于标签页的标签头，点选不同标签显示不同页面。

#### 选项构件

Shadow Widget 中可用作 “选项构件” 的有：

```
    OptSpan OptA OptImg OptButton OptInput OptOption OptDiv OptLi
```

这些构件名都以 "Opt" 前缀标示，OptSpan 对应于 Span，OptButton 对应 Button，其它类推。点击 “选项构件” 表示选中这个构件，它的 duals['data-checked'] 取值变为 `'1'`，未选时其值为空字串。

属性 `data-checked` 用在 CSS 定义中，可描述选项构件在选中与未选中时的界面表现，如上例用这个样式：
```
    .ctrl-page[data-checked="1"] { color: #c00; }
``` 
指定构件在选中时，按钮文字显示红色。

各选项构件可指定 `name` 属性表示它从属于哪组，相同 `name` 的多个选项构件成为一组，同组只能单选，若点选其中一个，其它则自动取消选中。

多个 OptOption 构件在 Select 下使用时，多个 OptOption 可以自动成组，不必指定同名 `name` 属性，这是原生 DOM 就支持的。另外，当 OptInput 在 `type='radio'` 时，原生 DOM 节点也支持用 name 定义成组。所以，针对 OptOption 与 OptInput，赋予的 name 属性不再承担额外功能。

#### 场景面板

Shadow Widget 中，只有 `GroundPanel` 或 `GroundDiv` 能用作场景面板，前者对应于 `Panel`，后者对应于 `Div`。

说明，Panel 与 Div 主要差别是：前者按 flex 对其内容布局，后者以 block 流方式布局。同理，NavPanel 与 NavDiv 的主要差别也是布局方式，一个类 Panel，一个类 Div。

场景面板表示可选显示的活页，切换活页，相当于切换场景。在一个 “可选导航” 功能组内，一次只能展示一个活页，未被展示的连 component 实体都不存在（未导入或已 unmount）。设计界面时，一般要将 “选项构件” 与 “场景面板” 一一对应起来，以同名 `key` 作为对应依据，如上例中，点击 key 为 `"a"` 的按钮，将活页切到 key 为 `"a"` 的 GroundDiv 面板。

#### 导航面板

导航面板主要有两个功能，其一是把多个 “选项构件” 与 “场景面板” 集合起来，形成一个功能模组，其二是让各模组独立成段，便于用 “段路径” 指示其位置（参见下一节介绍）。

导航面板只能用 `NavPanel` 与 `NavDiv` 二者之一构造，它为一个功能模组确定边界，比如 “选项构件” 与 “场景面板” 用 key 关联时，限在本导航面板内查找同名构件。再如，用 `name` 划出单选的选项组，也限在本导航面板内查找相同 `name` 选项构件。

场景面板必须直接挂在导航面板下面，而选项构件可挂在导航面板下任意级别，但不能挂在场景面板下（因为场景面板可选显示），也不宜直接挂在导航面板之下，因为与同名 key 的场景面板成为兄弟节点，key 命名冲突了，只在特定情况下某选项构件没对应场景面板时才可这么做。

&nbsp;
